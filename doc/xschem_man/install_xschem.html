<!DOCTYPE html>
<html>
<head>
<title>XSCHEM TUTORIAL</title>
<link rel="stylesheet" type="text/css" href="xschem_man.css" />
<style type="text/css">
/* Local styling goes here */
p{padding: 15px  30px 10px;}

</style>

</head>
<body>

<!-- start of slide -->
<div class="content">   
<!-- navigation buttons -->
<a href="compiling_xschem.html" class="prev">PREV</a>
<a href="xschem_man.html" class="home">UP</a>
<a href="run_xschem.html" class="next">NEXT</a>

 <!-- slide title -->
 <h1> INSTALL XSCHEM </h1><br>
 <p>
 in order to install the program run the following command (execute as root if you plan to do a system-wide
 installation, for example in /usr/local): 
 </p>
 <pre class="code">
  user:~$ make install
 </pre>
 <p>
  This will install all the runtime needed files into the locations defined in the <kbd>Makefile</kbd>.
  Before being able to run xschem you must setup a configuration file, <kbd><b>.xschem</b></kbd>, into your 
  home directory. This file will tell XSCHEM where to look for schematic and component libraries.
  XSCHEM will look for this file in the current directory or in the user's <kbd>${HOME}</kbd> directory.

 </p>
 <pre class="code" style="height: 300px;">
####
#### .xschem configuration file, to be placed in user HOME directory
#### or in the directory where xschem is launched
#### this file is called after system xschemrc, so any variable set here
#### overrides the default
####

#### xschem design libraries root dir
#### hint: put user dir before system dirs, so file selector
#### will present user dir.
set XSCHEM_DESIGN_PATH $env(HOME)/xschem_library:${XSCHEM_DESIGN_PATH}

#### directory where simulations, netlist and simulator outputs are placed
#### if unset xschem asks user to choose one when doing a netlist
# set netlist_dir $env(HOME)/xschem_library/simulations

#### Window to open on startup
set XSCHEM_START_WINDOW {mylib/0_top}

 </pre><br>
 <p class="important">
  For testing purposes <kbd>xschem</kbd> can be run and invoked from the build directory
  <kbd>xschem-&lt;version&gt;/</kbd> or <kbd>xschem-&lt;version&gt;/src/</kbd> without
  any .xschem or xschemrc definitions.<br>
 </p>
 <p>
  When xschem is running, type <kbd>puts $XSCHEM_DESIGN_PATH</kbd> in the xschem tcl prompt to 
  know the library search path.<br>
  Type <kbd>puts $XSCHEM_HOME_DIR</kbd> to see the installation path.
 </p>
 <img src="install_xschem1.png">

 <p>
  Note that <kbd>.xschem</kbd> is a TCL file, so use the TCL syntax for setting
  variables and accessing environment variables.
  The <kbd>XSCHEM_DESIGN_PATH</kbd> contains a list of library directories separated by colons.
  These directories contain all xschem symbols and schematics. Normally you should append
  <kbd>${XSCHEM_DESIGN_PATH}</kbd> to this list to avoid loosing system-wide definitions contained in 
  the <kbd>${XSCHEM_HOME_DIR}/xschemrc</kbd> startup file which is read before user's 
  <kbd>.xschem</kbd> file. All system-wide definitions can be overridden in user's 
  <kbd>.xschem</kbd> file, which is read after xschemrc.
  A sample user design library is provided and installed in the path 
  specified by the <kbd>Makefile</kbd>'s variable <kbd>user_library_prefix</kbd>, you can use it 
  as a starting point.<br>
  XSCHEM installation creates also a sample system-wide symbol library by default at: 
  <kbd>${prefix}/share/xschem/xschem_library</kbd>, where <kbd>prefix</kbd> is specified in the <kbd>Makefile</kbd>.<br>
  The XSCHEM_START_WINDOW specifies a schematic to preload at startup, to avoid absolute paths use a path that
  is relative to one of the <kbd>XSCHEM_DESIGN_PATH</kbd> directories. XSCHEM will figure out the actual location.
  You may comment the definition if you don't want any schematic on startup.
  
  
  <br><br>
  To complete the setup of XSCHEM create a <kbd>.xschem</kbd> file in your <kbd>$HOME</kbd> directory using
  a sample <kbd>.xschem</kbd> file that is provided in the distribution sources.
  Change it to fit your needs.
 </p> 
 <pre class="code">
  user:xschem-&lt;version&gt;/src$ cp .xschem ~/
 </pre><br>
 <p class="important">
  XSCHEM_HOME_DIR and XSCHEM_DESIGN_PATH shell environmental variables may be used to override any
  definition in xschem startup files
 </p><br><br>

 <h2> Detailed XSCHEM startup sequence </h2>
 <ul>
 <li>look for <kbd>XSCHEM_HOME_DIR</kbd> from environment variables.</li>
 <li>else if there is <kbd>../src/xchem.tcl</kbd> with respect to current dir and 
     <kbd>../xschem_library</kbd> then we are starting
     from a build directory, set <kbd>XSCHEM_HOME_DIR</kbd> to <kbd>`pwd`</kbd> and
     also set <kbd>XSCHEM_DESIGN_PATH</kbd> to <kbd>`pwd`/../xschem_library</kbd>.</li>
 <li>else if there is a <kbd>PREFIX/share/xschem</kbd> directory then set <kbd>XSCHEM_HOME_DIR</kbd>
     to <kbd>PREFIX/share/xschem</kbd>.</li>
 <li>source <kbd>XSCHEM_HOME_DIR/xschemrc</kbd> if existing.</li>
 <li>source <kbd>`pwd`/.xschem</kbd> or <kbd>$HOME/.xschem</kbd> if existing.</li>
 <li>if <kbd>XSCHEM_HOME_DIR</kbd> not defined --&gt; error and quit.</li>
 <li>look for <kbd>XSCHEM_DESIGN_PATH</kbd> from environment variables. This will override any
     value given in  xschemrc and .xschem startup files.</li>
 <li>if <kbd>XSCHEM_DESIGN_PATH</kbd> undefined set it to compile time default provided by Makefile:
     <kbd>xschem_library_path</kbd>.</li>
 <li>source <kbd>$XSCHEM_HOME_DIR/xschem.tcl</kbd>.</li>
 <li>start loading user provided schematic file or start with empty window  (or filename
     specified in <kbd>XSCHEM_START_WINDOW</kbd> tcl variable).</li>
 </ul>
 <br><br>

 <!-- end of slide -->
 <div class="filler"></div>
</div>

<!-- frame footer -->
<iframe seamless src="xschem_footer.html"  class="footer_iframe" >
</body>
</html>

