put [at 2:1]
 arg: /local/cflags
 arg: {-std=c99 -Wall}
put [at 3:1]
 arg: /local/ldflags
 arg: {-lm}
put [at 4:1]
 arg: /local/objs
 arg: {main.o foo.o bar.o}
if /local/debug [at 7:17]
then:
 append [at 8:2]
  arg: /local/cflags
  arg: {-g}
else:
 append [at 10:2]
  arg: /local/cflags
  arg: {-O2}
isempty [at 14:1]
 arg: /local/r
 arg: /local/somelib
invert [at 15:1]
 arg: /local/r
if /local/r [at 16:13]
then:
 append [at 17:2]
  arg: /local/cflags
  arg: { -I/usr/include/somelib}
 append [at 18:2]
  arg: /local/ldflags
  arg: { -lsomelib}
else:
 (NOP)
print [at 22:1]
 arg: [~
# Makefile generated by scconfig - DO NOT EDIT - please edit Makefile.in
CFLAGS=~/local/cflags~
LDFLAGS=~/local/ldflags~
OBJS=~/local/objs~

all: main

main: $(OBJS)
	$(CC) $(LDFLAGS)

~]
foreach /local/o in /local/objs [at 38:1]
 put [at 39:2]
  arg: /local/c
  arg: /local/o
 sub [at 40:2]
  arg: /local/c
  arg: {.o$}
  arg: {.c}
 print [at 41:2]
  arg: [~
~/local/o~: ~/local/c~
	$(CC) -c $(CFLAGS) ~/local/c~ -o ~/local/o~
	~]
print [at 47:1]
 arg: {#end
}
